<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="baidu-site-verification" content="2XMQAJIGe2" />
	<title>CodeIgniter集成Smarty</title>
	<meta name="description" content="CodeIgniter推荐使用原生的模板并且提供了一系列方法进行模板的操作。但是，一般的PHP框架和PHP系统都会推荐比较成熟的Smarty模板引擎。这篇文章主要介绍CodeIgniter如何配置Smarty。文章的最后将简单介绍如何完美的使用CodeIgniter原生的模板解决方案进行模板的输出。">
	
		<link rel="stylesheet" href="http://7xjddt.com1.z0.glb.clouddn.com/monokai.css">
		<link rel="stylesheet" href="http://7xjddt.com1.z0.glb.clouddn.com/bootstrap.min.css">
		<link rel="stylesheet" href="http://7xjddt.com1.z0.glb.clouddn.com/bootstrap-theme.min.css">
		<link rel="stylesheet" href="http://7xjddt.com1.z0.glb.clouddn.com/all.css">
		<link rel="stylesheet" href="http://7xjddt.com1.z0.glb.clouddn.com/font-awesome.min.css"/>
	
	<link rel="alternate" type="application/rss+xml" title="searchpcc - 一个正在老去的90后程序员" href="http://searchp.cc/feed.xml" />
	
		<link rel="icon" href="http://7xjddm.com1.z0.glb.clouddn.com/favicon.ico" type="image/x-icon">
	
</head>


<body>
<!--引入导航-->
<header>
	<!--导航菜单-->
	<nav class="navbar header navbar-fixed-top">
		<div class="container-fluid">
			<span class="navbar-brand"><a href="/">
				
					<img id="headerimg" src="http://7xjddm.com1.z0.glb.clouddn.com/header.jpeg"></a>
				
			</span>
			<div class="navbar-header">
				<button type="button" class ="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="/">searchpcc</a>
			</div>
			<div id="navbar" class="navbar-collapse collapse">
				<ul class="nav navbar-nav">
					<li><a href="/archive/">归档</a></li>
					<li><a href="/category/">分类</a></li>
					<li><a href="/series/">连载</a></li>
					<li><a href="/resume/">简历</a></li>
					<li><a href="/about/">关于</a></li>
				</ul>
			</div>
		</div>
	</nav><!-- 导航菜单结束-->
</header>


<!--主体内容-->
<div class="page-content">
    <div class="container-fluid">
    	<div class="row">
                <div class="col-md-offset-2 col-md-8  main-content">
                	<div  id="searchpcc">
						<a href="/"><img id="abouthead" src="/assets/images/about.png"></a>
						<p>一个正在老去的90后程序员 --searchpcc</p>
                	</div>
                </div>
        </div>

        <div class="row">
            <div class="col-md-offset-2 col-md-8  main-content">
                <div class="post">
	<!--文章标题和说明-->
	<header>
		<!--文章名称-->
		<h1 class="post-title">CodeIgniter集成Smarty</h1>
		<!--文章描述，时间和分类-->
		<p class="desc">
			<i class="fa fa-calendar"></i>
			2015/06/09 &nbsp;&nbsp;
			<i class="fa fa-folder-open-o fa-fw"></i>
			<a href="/category/">php </a>
		</p>
	</header>

	<!--文章内容-->
	<article class="post-content">
		<p><code>CodeIgniter</code>推荐使用原生的模板并且提供了一系列方法进行模板的操作。但是，一般的<code>PHP</code>框架和<code>PHP</code>系统都会推荐比较成熟的Smarty模板引擎。这篇文章主要介绍<code>CodeIgniter</code>如何配置<code>Smarty</code>。文章的最后将简单介绍如何完美的使用<code>CodeIgniter</code>原生的模板解决方案进行模板的输出。</p>

<h2 id="id-smarty">下载Smarty</h2>

<p>请点击<a href="https://github.com/smarty-php/smarty/archive/v3.1.24.tar.gz">这里</a>进行下载。下载之后将smarty-x.x.x.x改名为smarty。</p>

<h2 id="id-smarty-1">安装和配置Smarty</h2>

<h3 id="id-smarty-2">放置Smarty</h3>

<p>将整个<code>Smarty</code>文件夹放置到<code>third_party</code>（第三方类库）下面。</p>

<h3 id="id-smartyconfphp">创建smarty.conf.php配置文件</h3>

<p>在config下面创建文件smarty.conf.php文件。</p>

<pre><code class="language-php">&lt;?php
    $config['template_dir'] = APPLICATION_ROOT.'/application/views/templates/';
    $config['compile_dir'] =  APPLICATION_ROOT.'/application/cache/smarty/templates_c/';
    $config['left_delimiter']  = '&lt;{';
    $config['right_delimiter']  = '}&gt;';
?&gt;
</code></pre>

<h3 id="id-cismartyphp">创建CI_Smarty.php类库文件</h3>

<p>在<code>libraries</code><code>里面创建</code><code>CI_Smarty.php</code>`文件，然后写入如下内容:</p>

<pre><code class="language-php">&lt;?php  if (!defined('BASEPATH')) exit('No direct script access allowed');
/**
 * @author  searchpcc
 * 为了节省文章篇幅，代码也比较简单我就不加注释了。
 */
require_once( APPPATH.'third_party/smarty/libs/Smarty.class.php' );

class CI_Smarty extends Smarty {
    
    function __construct() {
        parent::__construct();
        $CI = get_instance();
        $CI-&gt;load-&gt;config('smarty.config');
        $this-&gt;error_reporting   = $CI-&gt;config-&gt;item('smarty.template_error_reporting');
        $this-&gt;template_dir = $CI-&gt;config-&gt;item("template_dir");
        $this-&gt;compile_dir = $CI-&gt;config-&gt;item("compile_dir");
        $this-&gt;left_delimiter = $CI-&gt;config-&gt;item("left_delimiter");
        $this-&gt;right_delimiter = $CI-&gt;config-&gt;item("right_delimiter");
        $this-&gt;assign("this", $CI);
    }
    
    function view($template, $data = array(), $return = FALSE) {
        foreach ($data as $key =&gt; $val) {
            $this-&gt;assign($key, $val);
        }
        if ($return == FALSE) {
            $CI =&amp; get_instance();
            if (method_exists( $CI-&gt;output, 'set_output' )) {
                $CI-&gt;output-&gt;set_output( $this-&gt;fetch($template) );
            } else {
                $CI-&gt;output-&gt;final_output = $this-&gt;fetch($template);
            }
            return;
        } else {
            return $this-&gt;fetch($template);
        }
    }
}
</code></pre>

<h3 id="id-autoloadphp">修改autoload.php自动加载文件</h3>

<p>将<code>ci_smarty</code>加入到自动加载文件之中。</p>

<pre><code class="language-php">$autoload['libraries'] = array('ci_smarty',...);
</code></pre>

<h2 id="id-smarty-3">测试Smarty类库</h2>

<pre><code class="language-php">// 模板是/views/templates/test/test.tpl
$this-&gt;ci_smarty-&gt;display('test/test.tpl');
</code></pre>

<h2 id="id-codeigniter">CodeIgniter自带模板处理</h2>

<h3 id="id-echo">echo输出</h3>

<pre><code class="language-php">&lt;?=$name?&gt;
</code></pre>

<h3 id="id-foreach">foreach</h3>

<pre><code class="language-php">&lt;?php foreach ($todo as $item): ?&gt;
&lt;?php endforeach; ?&gt;

// for while等类似
</code></pre>

<h3 id="id-if-elseif--else">if elseif 和 else</h3>

<pre><code class="language-php">&lt;?php if ($username == 'sally'): ?&gt;
   &lt;h3&gt;Hi Sally&lt;/h3&gt;
&lt;?php elseif ($username == 'joe'): ?&gt;
   &lt;h3&gt;Hi Joe&lt;/h3&gt;
&lt;?php else: ?&gt;
   &lt;h3&gt;Hi unknown user&lt;/h3&gt;
&lt;?php endif; ?&gt;
</code></pre>

<h2 id="id-section">参考链接</h2>

<p><a href="http://codeigniter.org.cn/user_guide/general/alternative_php.html">视图文件的 PHP 替代语法</a></p>

<p><a href="http://www.coolphptools.com/codeigniter-smarty">CodeIgniter+Smarty - Perfect Together</a></p>


	</article>

	<!--上下翻页-->
	<ul class="pager pagination-sm">
		<!--前一页-->
		
		<li class="previous">
			<a href="/20150530.html" title="Hello World">&larr; Previous</a>
		</li>
		

		<!--下一页-->
		
		<li class="next">
			<a href="/20150722.html" title="PHP多版本共存">Next &rarr;</a>
		</li>
		
	</ul>
	<!--引入评论-->
	<div id="disqus_thread"></div>
<script type="text/javascript">
	/* * * CONFIGURATION VARIABLES * * */
	var disqus_shortname = 'searchpcc';
	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
	var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>
	Please enable JavaScript to view the
	<a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
</div>

            </div>
        </div>
    </div>
</div>
<!--引入结尾-->
<!--页脚-->
<footer>
   	<p>Copyright  ©  2015  All Rights Reserved <script type="text/javascript">
	var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
	document.write(unescape("%3Cspan id='cnzz_stat_icon_1255277077'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1255277077%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));
</script></p>
 	<div class="scroll-top hidden-xs"><i class="fa fa-arrow-circle-up"></i></div>
</footer>

<!--引入脚本-->
<!--所有脚本文件的引入-->

	<script src="http://7xjddx.com1.z0.glb.clouddn.com/highlight.pack.js"></script>
	<script src="http://7xjddx.com1.z0.glb.clouddn.com/jquery.min.js"></script>
	<script src="http://7xjddx.com1.z0.glb.clouddn.com/bootstrap.min.js"></script>
	<script src="http://7xjddx.com1.z0.glb.clouddn.com/all.js"></script>

<script> hljs.initHighlightingOnLoad(); </script>

</body>
</html>
