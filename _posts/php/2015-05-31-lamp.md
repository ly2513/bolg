---
layout: post
title:  Ubuntu 搭建 LNMP
categories: php
---

LNMP指的是Linux、Nginx、Mysql、PHP。当然，你也可以在P上加入php-mysql的好伴侣PhpMyadmin。这篇文章主要介绍在ubuntu 14.04之上使用apt-get搭建LNMP环境。

## 一、操作步骤 ##

### 1.安装Nginx ###

```shell
sudo apt-get install update
sudo apt-get install nginx
```

### 2.测试Nginx，如果显示如下图则代表安装成功 ###

```bash
ip addr show eth0 | grep inet | awk '{ print $2; }' | sed 's/\/.*$//' #查看本机IP地址
curl http://127.0.0.1 或者 curl http://本机ip
```

### 3.安装MySQL ###

```bash
sudo apt-get install mysql-server
# 连续输入两次相同的密码
```

### 4.安装PHP ###

```bash
sudo apt-get install php5-fpm php5-mysql
```
### 5.配置PHP，修改php.ini文件 ###

```bash
# 备份php.ini文件
cp /etc/php5/fpm/php.ini /etc/php5/fpm/php.ini.back
# 取消有安全隐患的pathinfo模式
vim /etc/php5/fpm/php.ini
# 将cgi.fix_pathinfo=1 设置为 cgi.fix_pathinfo=0
cgi.fix_pathinfo=0
#启动php-fpm
sudo service php5-fpm restart
```

### 6.配置Nginx让其使用php-fpm进程 ###

```bash
cp /etc/nginx/sites-available/default /etc/nginx/sites-available/default.back
```

```yaml
server {
  listen 80 default_server;
  listen [::]:80 default_server ipv6only=on;
  root /usr/share/nginx/html;
  index index.php index.html index.htm;
  server_name server_domain_name_or_IP;
  location / {
    try_files $uri $uri/ =404;
  }
  error_page 404 /404.html;
  error_page 500 502 503 504 /50x.html;
  location = /50x.html {
    root /usr/share/nginx/html;
  }
  location ~ \.php$ {
    try_files $uri =404;
    fastcgi_split_path_info ^(.+\.php)(/.+)$;
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include fastcgi_params;
   }
}
```

### 7.重启nginx服务器 ###

```bash
sudo service nginx restart
```

### 8.在/usr/share/nginx/html/里面建立info.php写入如下内容 ###

```php
<?php
	phpinfo();
?>
	浏览器输入: http://ip/info.php
```

## 二、写在最后 ##

这篇文章只是简单的介绍了Nginx+php-fpm的安装。如果你对Linux有更深入的研究，完全可以使用手动安装源码包的方式进行安装和配置。当然，你看到这篇文章的时候应该已经知道了Nginx的优秀之处了，后续文章会继续剖析Nginx的经典配置和Nginx与Apahce的异同。

<完>